# Арбитражный монитор цен (Telegram-бот)

Бот сравнивает цены токенов (BTC, ETH, SOL, BNB) на нескольких биржах (Binance, Coinbase, Kraken, KuCoin, Bybit, OKX, Bitstamp) и присылает в телеграм чат сводку и алерты, если разница (спред) превышает заданный порог.

## Возможности
- Параллельные запросы к публичным API бирж (без ключей)
- Нормализация к USD (USDT → USD через курс USDT-USD с Coinbase)
- По каждой монете: лучшая цена для покупки и продажи, абсолютный и процентный спред
- Настройка порога спреда, интервала обновления, набора токенов и списка бирж
- Разовый снимок (/once) и автообновления (/start)

## Установка
1. Установите Python 3.10+
2. Скачайте архив `project.zip` и распакуйте, либо клонируйте файлы.
3. В папке проекта:
   ```bash
   python -m venv .venv
   . .venv/bin/activate  # Windows: .venv\Scripts\activate
   pip install -r requirements.txt
   cp .env.example .env
   ```
4. Откройте `.env` и добавьте токен бота Telegram (`TELEGRAM_BOT_TOKEN`).
   - Создать бота: в Telegram напишите @BotFather → `/newbot`

## Запуск
```bash
python bot.py
```
Отправьте боту в Telegram команду `/start`.

## Команды
- `/start` — запуск автообновлений (по умолчанию каждые 60 секунд)
- `/stop` — остановка автообновлений
- `/once` — разовый снимок цен
- `/set_threshold 0.5` — установить порог спреда в %
- `/set_interval 30` — интервал автообновления в секундах
- `/set_tokens BTC,ETH,SOL,BNB` — выбрать монеты
- `/set_exchanges binance,coinbase,kraken,kucoin,bybit,okx,bitstamp` — выбрать биржи
- `/status` — показать текущие настройки
- `/help` — помощь

## Примечания
- На некоторых биржах BNB/BNB-USD пары могут отсутствовать (Kraken, Bitstamp). Бот пропустит их.
- Если биржа возвращает цену в USDT, бот конвертирует в USD по курсу USDT-USD с Coinbase.
- При сетевых ошибках источник просто пропускается до следующего цикла.

## Расширение
- Добавьте новые источники в `price_sources.EXCHANGES` и пропишите символы в `SYMBOLS`.
- Для DeFi/DEX и обменников можно реализовать запросы к публичным quote-API (если есть) — добавьте адаптер по аналогии.
